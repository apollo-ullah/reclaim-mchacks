(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31424,e=>{"use strict";var s=e.i(43476),a=e.i(71645);function t({onImageSelect:e,preview:t,disabled:r=!1}){let[i,l]=(0,a.useState)(!1),n=(0,a.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),l(!0)},[]),c=(0,a.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),l(!1)},[]),d=(0,a.useCallback)(s=>{if(s.preventDefault(),s.stopPropagation(),l(!1),r)return;let a=s.dataTransfer.files;if(a&&a.length>0){let s=a[0];s.type.startsWith("image/")&&e(s)}},[e,r]),o=(0,a.useCallback)(s=>{let a=s.target.files;a&&a.length>0&&e(a[0])},[e]);return(0,s.jsxs)("div",{className:`relative border-2 border-dashed rounded-xl p-8 text-center transition-all duration-200 ${i?"border-blue-500 bg-blue-500/10":"border-zinc-700 hover:border-zinc-500"} ${r?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,onDragOver:n,onDragLeave:c,onDrop:d,children:[(0,s.jsx)("input",{type:"file",accept:"image/png,image/jpeg,image/jpg",onChange:o,disabled:r,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer disabled:cursor-not-allowed"}),t?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("img",{src:t,alt:"Preview",className:"max-h-64 mx-auto rounded-lg shadow-lg"}),(0,s.jsx)("p",{className:"text-sm text-zinc-400",children:"Click or drag to replace image"})]}):(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"w-16 h-16 mx-auto bg-zinc-800 rounded-xl flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-8 h-8 text-zinc-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-zinc-300 font-medium",children:"Drop your image here, or click to browse"}),(0,s.jsx)("p",{className:"text-sm text-zinc-500 mt-1",children:"Supports PNG and JPEG files"})]})]})]})}e.s(["ImageUpload",()=>t])},29781,e=>{"use strict";var s=e.i(43476),a=e.i(71645),t=e.i(31424),r=e.i(91432),i=e.i(22016);function l(){let{creator:e,isAuthenticated:l,isLoading:n}=(0,r.useAuth)(),[c,d]=(0,a.useState)(null),[o,m]=(0,a.useState)(null),[x,u]=(0,a.useState)(!1),[h,p]=(0,a.useState)(null),g=(0,a.useCallback)(e=>{d(e),p(null);let s=new FileReader;s.onload=e=>{m(e.target?.result)},s.readAsDataURL(e)},[]),b=async()=>{if(c&&e){u(!0),p(null);try{let s=new FormData;s.append("image",c),s.append("creator_id",e.id);let a=await fetch("/api/sign",{method:"POST",body:s}),t=await a.json();p(t)}catch{p({success:!1,error:"Failed to sign image. Please try again."})}finally{u(!1)}}};return n?(0,s.jsx)("div",{className:"max-w-2xl mx-auto px-4 py-12",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"w-8 h-8 border-2 border-zinc-700 border-t-zinc-400 rounded-full animate-spin mx-auto"}),(0,s.jsx)("p",{className:"text-zinc-400 mt-4",children:"Loading..."})]})}):l?(0,s.jsxs)("div",{className:"max-w-2xl mx-auto px-4 py-12",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-zinc-100 mb-2",children:"Sign an Image"}),(0,s.jsx)("p",{className:"text-zinc-400",children:"Embed your invisible watermark to claim ownership"})]}),h?.success?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-emerald-500/10 border border-emerald-500/30 rounded-xl p-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-emerald-500 rounded-full flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-emerald-400",children:"Image Signed Successfully"}),(0,s.jsx)("p",{className:"text-sm text-zinc-400",children:"Your watermark has been embedded"})]})]}),(0,s.jsx)("div",{className:"bg-zinc-900 rounded-lg p-4 mb-4",children:(0,s.jsx)("img",{src:`data:image/png;base64,${h.signedImageBase64}`,alt:"Signed image",className:"max-h-64 mx-auto rounded-lg"})}),(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-zinc-500",children:"Creator"}),(0,s.jsx)("span",{className:"text-zinc-300",children:h.metadata?.creatorId})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-zinc-500",children:"Signed At"}),(0,s.jsx)("span",{className:"text-zinc-300",children:h.metadata?.timestamp&&new Date(h.metadata.timestamp).toLocaleString()})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-zinc-500",children:"Image Hash"}),(0,s.jsx)("span",{className:"font-mono text-zinc-300",children:h.metadata?.originalHash})]})]})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,s.jsxs)("button",{onClick:()=>{if(!h?.signedImageBase64)return;let e=document.createElement("a");e.href=`data:image/png;base64,${h.signedImageBase64}`,e.download=`reclaim-signed-${Date.now()}.png`,document.body.appendChild(e),e.click(),document.body.removeChild(e)},className:"flex-1 py-3 bg-blue-500 hover:bg-blue-600 text-white font-medium rounded-lg transition-colors flex items-center justify-center gap-2",children:[(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download Signed Image"]}),(0,s.jsx)("button",{onClick:()=>{d(null),m(null),p(null)},className:"flex-1 py-3 bg-zinc-800 hover:bg-zinc-700 text-zinc-100 font-medium rounded-lg border border-zinc-700 transition-colors",children:"Sign Another Image"})]})]}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl p-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-medium",children:e?.display_name?.[0]?.toUpperCase()||"?"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-zinc-400",children:"Signing as"}),(0,s.jsx)("p",{className:"font-medium text-zinc-100",children:e?.display_name})]}),(0,s.jsxs)("div",{className:"ml-auto text-right",children:[(0,s.jsx)("p",{className:"text-xs text-zinc-500",children:"Wallet"}),(0,s.jsxs)("p",{className:"text-xs font-mono text-zinc-400",children:[e?.id.slice(0,6),"...",e?.id.slice(-4)]})]})]})}),(0,s.jsxs)("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl p-6",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-zinc-300 mb-3",children:"Image"}),(0,s.jsx)(t.ImageUpload,{onImageSelect:g,preview:o,disabled:x})]}),h?.error&&(0,s.jsx)("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-4",children:(0,s.jsx)("p",{className:"text-red-400 text-sm",children:h.error})}),(0,s.jsx)("button",{onClick:b,disabled:!c||!e||x,className:"w-full py-3 bg-blue-500 hover:bg-blue-600 disabled:bg-zinc-700 disabled:cursor-not-allowed text-white font-medium rounded-lg transition-colors flex items-center justify-center gap-2",children:x?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),"Sign Image"]})}),(0,s.jsx)("div",{className:"bg-amber-500/10 border border-amber-500/20 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("svg",{className:"w-5 h-5 text-amber-400 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-amber-200 font-medium",children:"Output Format"}),(0,s.jsx)("p",{className:"text-xs text-amber-200/70 mt-1",children:"Signed images are always saved as PNG to preserve the watermark. JPEG compression can destroy the hidden data."})]})]})})]})]}):(0,s.jsxs)("div",{className:"max-w-2xl mx-auto px-4 py-12",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-zinc-100 mb-2",children:"Sign an Image"}),(0,s.jsx)("p",{className:"text-zinc-400",children:"Embed your invisible watermark to claim ownership"})]}),(0,s.jsxs)("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl p-8 text-center",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500/20 to-purple-600/20 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)("svg",{className:"w-8 h-8 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,s.jsx)("h2",{className:"text-xl font-semibold text-zinc-100 mb-2",children:"Creator Account Required"}),(0,s.jsx)("p",{className:"text-zinc-400 mb-6",children:"Create a creator account to start signing your images with your unique identity."}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[(0,s.jsx)(i.default,{href:"/signup",className:"inline-flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg font-medium hover:from-blue-600 hover:to-purple-700 transition-all",children:"Create Account"}),(0,s.jsx)(i.default,{href:"/login",className:"inline-flex items-center justify-center gap-2 px-6 py-3 bg-zinc-800 text-zinc-100 rounded-lg font-medium hover:bg-zinc-700 transition-all border border-zinc-700",children:"Log In"})]})]})]})}e.s(["default",()=>l])}]);
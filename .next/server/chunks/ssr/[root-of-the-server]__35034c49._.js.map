{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../app/signup/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { useWallet } from \"@solana/wallet-adapter-react\";\nimport { useWalletModal } from \"@solana/wallet-adapter-react-ui\";\nimport { useRouter } from \"next/navigation\";\nimport { useAuth } from \"@/lib/auth-context\";\nimport Link from \"next/link\";\n\nexport default function SignupPage() {\n  const { publicKey, connected, disconnect } = useWallet();\n  const { setVisible } = useWalletModal();\n  const { isAuthenticated, refreshAuth } = useAuth();\n  const router = useRouter();\n\n  const [displayName, setDisplayName] = useState(\"\");\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [error, setError] = useState(\"\");\n  const [step, setStep] = useState(1);\n\n  // Redirect if already authenticated\n  useEffect(() => {\n    if (isAuthenticated) {\n      router.push(\"/sign\");\n    }\n  }, [isAuthenticated, router]);\n\n  // Disconnect wallet on mount to ensure clean state\n  useEffect(() => {\n    if (connected && step === 1) {\n      disconnect();\n    }\n  }, []);\n\n  const handleNameSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!displayName.trim()) {\n      setError(\"Please enter a display name\");\n      return;\n    }\n    if (displayName.trim().length < 2) {\n      setError(\"Display name must be at least 2 characters\");\n      return;\n    }\n    setError(\"\");\n    setStep(2);\n  };\n\n  const handleConnectWallet = () => {\n    setVisible(true);\n  };\n\n  const handleCreateAccount = async () => {\n    if (!publicKey || !displayName.trim()) return;\n\n    setIsSubmitting(true);\n    setError(\"\");\n\n    try {\n      const response = await fetch(\"/api/auth/signup\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          wallet_address: publicKey.toBase58(),\n          display_name: displayName.trim(),\n        }),\n      });\n\n      const data = await response.json();\n\n      if (!response.ok) {\n        throw new Error(data.error || \"Failed to create account\");\n      }\n\n      await refreshAuth();\n      router.push(\"/sign\");\n    } catch (err) {\n      setError(err instanceof Error ? err.message : \"Something went wrong\");\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  // Auto-advance to step 3 when wallet connects\n  useEffect(() => {\n    if (connected && step === 2) {\n      setStep(3);\n    }\n  }, [connected, step]);\n\n  if (isAuthenticated) {\n    return null;\n  }\n\n  return (\n    <div className=\"max-w-md mx-auto px-4 py-16\">\n      <div className=\"text-center mb-8\">\n        <h1 className=\"text-3xl font-bold text-zinc-100 mb-2\">\n          Create Your Creator Account\n        </h1>\n        <p className=\"text-zinc-400\">\n          Sign your media and prove authenticity\n        </p>\n      </div>\n\n      <div className=\"bg-zinc-900 rounded-xl border border-zinc-800 p-6\">\n        {/* Progress Steps */}\n        <div className=\"flex items-center justify-between mb-8\">\n          {[1, 2, 3].map((s) => (\n            <div key={s} className=\"flex items-center\">\n              <div\n                className={`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium transition-colors ${\n                  step > s\n                    ? \"bg-green-500/20 text-green-400\"\n                    : step === s\n                    ? \"bg-blue-500/20 text-blue-400 ring-2 ring-blue-500/50\"\n                    : \"bg-zinc-800 text-zinc-500\"\n                }`}\n              >\n                {step > s ? \"âœ“\" : s}\n              </div>\n              {s < 3 && (\n                <div\n                  className={`w-16 sm:w-24 h-0.5 mx-2 ${\n                    step > s ? \"bg-green-500/50\" : \"bg-zinc-800\"\n                  }`}\n                />\n              )}\n            </div>\n          ))}\n        </div>\n\n        {/* Step 1: Enter Display Name */}\n        {step === 1 && (\n          <div>\n            <h2 className=\"text-lg font-semibold text-zinc-100 mb-2\">\n              Choose your creator name\n            </h2>\n            <p className=\"text-sm text-zinc-400 mb-4\">\n              This is how you&apos;ll appear when others verify your signed images.\n            </p>\n            <form onSubmit={handleNameSubmit}>\n              <input\n                type=\"text\"\n                value={displayName}\n                onChange={(e) => setDisplayName(e.target.value)}\n                placeholder=\"Enter your name\"\n                maxLength={50}\n                autoFocus\n                className=\"w-full px-4 py-3 bg-zinc-800 border border-zinc-700 rounded-lg text-zinc-100 placeholder-zinc-500 focus:border-blue-500 focus:outline-none mb-4\"\n              />\n              {error && (\n                <div className=\"mb-4 p-3 bg-red-500/10 border border-red-500/20 rounded-lg text-red-400 text-sm\">\n                  {error}\n                </div>\n              )}\n              <button\n                type=\"submit\"\n                className=\"w-full py-3 px-4 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg font-medium hover:from-blue-600 hover:to-purple-700 transition-all\"\n              >\n                Continue\n              </button>\n            </form>\n          </div>\n        )}\n\n        {/* Step 2: Connect Wallet */}\n        {step === 2 && (\n          <div>\n            <h2 className=\"text-lg font-semibold text-zinc-100 mb-2\">\n              Connect your Solana wallet\n            </h2>\n            <p className=\"text-sm text-zinc-400 mb-4\">\n              Your wallet address will be your unique creator ID. All signed images will be linked to this wallet.\n            </p>\n\n            <div className=\"p-4 bg-zinc-800/50 rounded-lg mb-4\">\n              <p className=\"text-sm text-zinc-300\">\n                Signing up as: <span className=\"font-medium text-zinc-100\">{displayName}</span>\n              </p>\n            </div>\n\n            <button\n              onClick={handleConnectWallet}\n              className=\"w-full py-3 px-4 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg font-medium hover:from-blue-600 hover:to-purple-700 transition-all flex items-center justify-center gap-2\"\n            >\n              <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z\" />\n              </svg>\n              Connect Wallet\n            </button>\n\n            <button\n              onClick={() => setStep(1)}\n              className=\"w-full mt-3 py-2 text-sm text-zinc-400 hover:text-zinc-300 transition-colors\"\n            >\n              Back\n            </button>\n          </div>\n        )}\n\n        {/* Step 3: Confirm & Create */}\n        {step === 3 && (\n          <div>\n            <h2 className=\"text-lg font-semibold text-zinc-100 mb-2\">\n              Confirm your account\n            </h2>\n            <p className=\"text-sm text-zinc-400 mb-4\">\n              Review your details and create your creator account.\n            </p>\n\n            <div className=\"space-y-3 mb-6\">\n              <div className=\"p-4 bg-zinc-800/50 rounded-lg\">\n                <p className=\"text-xs text-zinc-500 mb-1\">Creator Name</p>\n                <p className=\"font-medium text-zinc-100\">{displayName}</p>\n              </div>\n              <div className=\"p-4 bg-zinc-800/50 rounded-lg\">\n                <p className=\"text-xs text-zinc-500 mb-1\">Wallet Address</p>\n                <p className=\"font-mono text-sm text-zinc-300\">\n                  {publicKey?.toBase58().slice(0, 12)}...{publicKey?.toBase58().slice(-12)}\n                </p>\n              </div>\n            </div>\n\n            {error && (\n              <div className=\"mb-4 p-3 bg-red-500/10 border border-red-500/20 rounded-lg text-red-400 text-sm\">\n                {error}\n              </div>\n            )}\n\n            <button\n              onClick={handleCreateAccount}\n              disabled={isSubmitting}\n              className=\"w-full py-3 px-4 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg font-medium hover:from-blue-600 hover:to-purple-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              {isSubmitting ? \"Creating Account...\" : \"Create Account\"}\n            </button>\n\n            <button\n              onClick={() => {\n                disconnect();\n                setStep(2);\n              }}\n              className=\"w-full mt-3 py-2 text-sm text-zinc-400 hover:text-zinc-300 transition-colors\"\n            >\n              Use Different Wallet\n            </button>\n          </div>\n        )}\n      </div>\n\n      <p className=\"text-center text-zinc-500 text-sm mt-6\">\n        Already have an account?{\" \"}\n        <Link href=\"/login\" className=\"text-blue-400 hover:text-blue-300\">\n          Log in\n        </Link>\n      </p>\n    </div>\n  );\n}\n"],"names":["module","exports","require","vendored","HooksClientContext","ServerInsertedHtml"],"mappings":"gjBAAAA,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,QAAW,CAACC,kBAAkB,+BCFzCJ,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,QAAW,CAACE,kBAAkB,0CCAzC,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEe,SAAS,IACtB,GAAM,WAAE,CAAS,WAAE,CAAS,YAAE,CAAU,CAAE,CAAG,CAAA,EAAA,EAAA,SAAA,AAAS,IAChD,CAAE,YAAU,CAAE,CAAG,CAAA,EAAA,EAAA,cAAA,AAAc,IAC/B,iBAAE,CAAe,aAAE,CAAW,CAAE,CAAG,CAAA,EAAA,EAAA,OAAA,AAAO,IAC1C,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAElB,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACzC,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAC3C,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAC7B,CAAC,EAAM,EAAQ,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAS,GAGjC,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACJ,GACF,EAAO,IAAI,CAAC,OADO,CAGvB,EAAG,CAAC,EAAiB,EAAO,EAG5B,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACJ,GAAsB,GAAG,CAAZ,GACf,GAEJ,EAAG,EAAE,EAoBL,IAAM,EAAsB,UAC1B,GAAI,AAAC,GAAc,EAAY,IAAI,IAAjB,AAAqB,AAEvC,GAAgB,GAChB,EAAS,IAET,GAAI,CACF,IAAM,EAAW,MAAM,MAAM,mBAAoB,CAC/C,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,KAAM,KAAK,SAAS,CAAC,CACnB,eAAgB,EAAU,QAAQ,GAClC,aAAc,EAAY,IAAI,EAChC,EACF,GAEM,EAAO,MAAM,EAAS,IAAI,GAEhC,GAAI,CAAC,EAAS,EAAE,CACd,CADgB,KACV,AAAI,MAAM,EAAK,KAAK,EAAI,2BAGhC,OAAM,IACN,EAAO,IAAI,CAAC,QACd,CAAE,MAAO,EAAK,CACZ,EAAS,aAAe,MAAQ,EAAI,OAAO,CAAG,uBAChD,QAAU,CACR,GAAgB,EAClB,EACF,QASA,CANA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACJ,GAAsB,GAAG,CAAZ,GACf,EAAQ,EAEZ,EAAG,CAAC,EAAW,EAAK,EAEhB,GACK,KAIP,CAAA,EAAA,EAAA,IALmB,AAKnB,EAAC,MAAA,CAAI,UAAU,wCACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6BACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,iDAAwC,gCAGtD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yBAAgB,8CAK/B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8DAEb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kDACZ,CAAC,EAAG,EAAG,EAAE,CAAC,GAAG,CAAE,AAAD,GACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAY,UAAU,8BACrB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,UAAW,CAAC,4FAA4F,EACtG,EAAO,EACH,iCACA,IAAS,EACT,uDACA,4BAAA,CACJ,UAED,EAAO,EAAI,IAAM,IAEnB,EAAI,GACH,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,UAAW,CAAC,wBAAwB,EAClC,EAAO,EAAI,kBAAoB,cAAA,CAC/B,KAhBE,MAwBJ,IAAT,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,oDAA2C,6BAGzD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,sCAA6B,qEAG1C,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,SA3GU,AAAD,CA2GC,GAzGxB,CADA,EAAE,CACE,aADY,GACX,EAAY,IAAI,IAAI,AAIrB,EAAY,IAAI,GAAG,MAAM,CAAG,EAC9B,CADiC,CACxB,+CAGX,EAAS,IACT,EAAQ,IARN,EAAS,8BASb,YAgGY,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,OACL,MAAO,EACP,SAAU,AAAC,GAAM,EAAe,EAAE,MAAM,CAAC,KAAK,EAC9C,YAAY,kBACZ,UAAW,GACX,SAAS,CAAA,CAAA,EACT,UAAU,oJAEX,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,2FACZ,IAGL,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,KAAK,SACL,UAAU,kKACX,mBAQG,IAAT,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,oDAA2C,+BAGzD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,sCAA6B,yGAI1C,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,kCAAwB,kBACpB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,qCAA6B,SAIhE,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,QAvIgB,CAuIP,IAtInB,GAAW,EACb,EAsIY,UAAU,0MAEV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,UAAU,KAAK,OAAO,OAAO,eAAe,QAAQ,qBACjE,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,cAAc,QAAQ,eAAe,QAAQ,YAAa,EAAG,EAAE,yJACjE,oBAIR,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,IAAM,EAAQ,GACvB,UAAU,wFACX,YAOJ,AAAS,OACR,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,oDAA2C,yBAGzD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,sCAA6B,yDAI1C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2BACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0CACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,sCAA6B,iBAC1C,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,qCAA6B,OAE5C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0CACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,sCAA6B,mBAC1C,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,4CACV,GAAW,WAAW,MAAM,EAAG,IAAI,MAAI,GAAW,WAAW,MAAM,CAAC,aAK1E,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,2FACZ,IAIL,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,EACT,SAAU,EACV,UAAU,kNAET,EAAe,sBAAwB,mBAG1C,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,KACP,IACA,EAAQ,EACV,EACA,UAAU,wFACX,+BAOP,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,mDAAyC,2BAC3B,IACzB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,SAAS,UAAU,6CAAoC,gBAM1E","ignoreList":[0,1]}